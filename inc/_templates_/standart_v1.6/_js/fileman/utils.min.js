var FileTypes=new Array;function RoxyUtils(){}function RoxyFilemanConf(){}function RoxyLang(){}function t(t){var e=t;return RoxyLang&&RoxyLang[t]&&(e=RoxyLang[t]),e}FileTypes.image=new Array("jpg","jpeg","png","gif"),FileTypes.media=new Array("avi","flv","swf","wmv","mp3","wma","mpg","mpeg"),FileTypes.document=new Array("doc","docx","txt","rtf","pdf","xls","mdb","html","htm","db"),RoxyUtils.FixPath=function(t){if(!t)return"";var e=t.replace(/\\/g,"");return e=(e=e.replace(/\/\//g,"/")).replace(":/","://")},RoxyUtils.FormatDate=function(t){var e="";try{e=$.format.date(t,RoxyFilemanConf.DATEFORMAT)}catch(n){e=(e=t.toString()).substr(0,e.indexOf("UTC"))}return e},RoxyUtils.GetPath=function(t){var e="";return(t=RoxyUtils.FixPath(t)).indexOf("/")>-1&&(e=t.substring(0,t.lastIndexOf("/"))),e},RoxyUtils.GetUrlParam=function(t,e){var n="";if(e||(e=self.location.href),e.indexOf("?")>-1)for(e=(e=e.substr(e.indexOf("?")+1)).split("&"),i=0;i<e.length;i++){var o=e[i].split("=");if(o[0]&&o[1]&&o[0]==t){n=o[1];break}}return n},RoxyUtils.GetFilename=function(t){var e=t;return(t=RoxyUtils.FixPath(t)).indexOf("/")>-1&&(e=t.substring(t.lastIndexOf("/")+1)),e},RoxyUtils.MakePath=function(){if(ret="",arguments&&arguments.length>0){for(var t=0;t<arguments.length;t++)ret+=$.isArray(arguments[t])?arguments[t].join("/"):arguments[t],t<arguments.length-1&&(ret+="/");ret=RoxyUtils.FixPath(ret)}return ret},RoxyUtils.GetFileExt=function(t){var e="";return(t=RoxyUtils.GetFilename(t)).indexOf(".")>-1&&(e=t.substring(t.lastIndexOf(".")+1)),e},RoxyUtils.FileExists=function(t){var e=!1;return $.ajax({url:t,type:"HEAD",async:!1,dataType:"text",success:function(){e=!0}}),e},RoxyUtils.GetFileIcon=function(t){return ret="images/fileman/filetypes/unknown.png",fileTypeIcons[RoxyUtils.GetFileExt(t).toLowerCase()]&&(ret="images/fileman/filetypes/"+fileTypeIcons[RoxyUtils.GetFileExt(t).toLowerCase()]),ret},RoxyUtils.GetFileSize=function(t){var e=0;return $.ajax({url:t,type:"HEAD",async:!1,success:function(t,n,i){e=i.getResponseHeader("Content-Length")}}),e||(e=0),e},RoxyUtils.GetFileType=function(t){var e=RoxyUtils.GetFileExt(t).toLowerCase();return"png"!=e&&"jpg"!=e&&"gif"!=e&&"jpeg"!=e||(e="image"),e},RoxyUtils.IsImage=function(t){var e=!1;return"image"==RoxyUtils.GetFileType(t)&&(e=!0),e},RoxyUtils.FormatFileSize=function(t){var e="B";return t||(t=0),t>1024&&(t/=1024,e="KB"),t>1024&&(t/=1024,e="MB"),(t=new Number(t)).toFixed(2)+" "+e},RoxyUtils.AddParam=function(t,e,n){return t+=(t.indexOf("?")>-1?"&":"?")+e+"="+encodeURIComponent(n)},RoxyUtils.SelectText=function(t,e,n){try{var i=document.getElementById(t);if(i.createTextRange){var o=i.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}else i.setSelectionRange?i.setSelectionRange(e,n):i.selectionStart&&(i.selectionStart=e,i.selectionEnd=n);i.focus()}catch(t){}},RoxyUtils.LoadConfig=function(){RoxyFilemanConf=config},RoxyUtils.LoadLang=function(){var t="";if(RoxyFilemanConf.LANG&&"auto"==RoxyFilemanConf.LANG.toLowerCase()){if(RoxyUtils.GetUrlParam("langCode"))t="lang/fileman/"+RoxyUtils.GetUrlParam("langCode").substr(0,2).toLowerCase()+".json";else t="lang/fileman/"+(window.navigator.userLanguage||window.navigator.language).substr(0,2)+".json";RoxyUtils.FileExists(t)||(t="")}else RoxyFilemanConf.LANG&&(t="lang/fileman/"+RoxyFilemanConf.LANG.substr(0,2).toLowerCase()+".json",RoxyUtils.FileExists(t)||(t=""));t||(t="lang/fileman/en.json"),$.ajax({url:t,dataType:"json",async:!1,success:function(t){RoxyLang=t},error:function(t){alert("Error loading language file")}})},RoxyUtils.Translate=function(){RoxyUtils.LoadLang(),$("[data-lang-t]").each(function(){var e=$(this).attr("data-lang-t");$(this).prop("title",t(e))}),$("[data-lang-v]").each(function(){var e=$(this).attr("data-lang-v");$(this).prop("value",t(e))}),$("[data-lang]").each(function(){var e=$(this).attr("data-lang");$(this).html(t(e))})},RoxyUtils.GetCookies=function(){var t=new Object,e=document.cookie.replace(" ","");for(i in e=e.split(";")){var n=e[i].split("=");n.length>1&&(t[$.trim(n[0].toString())]=decodeURIComponent($.trim(n[1].toString()))||"")}return t},RoxyUtils.GetCookie=function(t){return RoxyUtils.GetCookies()[t]||""},RoxyUtils.SetCookie=function(t,e,n,i){var o=new Date;n&&o.setTime(o.getTime()+3600*n*1e3),i||(i="/"),document.cookie=t+"="+encodeURIComponent(e)+"; path="+i+(n?"; expires="+o.toGMTString():"")},RoxyUtils.ToBool=function(t){var e=!1;return"true"!=(t=t.toString().toLowerCase())&&"on"!=t&&"yes"!=t&&"1"!=t||(e=!0),e},RoxyUtils.UnsetCookie=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1972 00:00:00 UTC"};