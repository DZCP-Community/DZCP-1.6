function File(a,i,e,s,l){this.fullPath=a,this.type=RoxyUtils.GetFileType(a),this.name=RoxyUtils.GetFilename(a),this.path=RoxyUtils.GetPath(a),this.icon=RoxyUtils.GetFileIcon(a),this.bigIcon=this.icon.replace("filetypes","filetypes/big"),this.image=a,this.size=i||RoxyUtils.GetFileSize(a),this.time=e,this.width=s||0,this.height=l||0,this.Show=function(){html='<li data-path="'+this.fullPath+'" data-time="'+this.time+'" data-icon="'+this.icon+'" data-w="'+this.width+'" data-h="'+this.height+'" data-size="'+this.size+'" data-icon-big="'+(this.IsImage()?this.fullPath:this.bigIcon)+'" title="'+this.name+'">',html+='<img src="'+this.icon+'" class="icon">',html+='<span class="time">'+RoxyUtils.FormatDate(new Date(1e3*this.time))+"</span>",html+='<span class="name">'+this.name+"</span>",html+='<span class="size">'+RoxyUtils.FormatFileSize(this.size)+"</span>",html+="</li>",$("#pnlFileList").append(html);var t=$("#pnlFileList li:last");RoxyFilemanConf.MOVEFILE&&t.draggable({helper:makeDragFile,start:startDragFile,cursorAt:{left:10,top:10},delay:200}),t.click(function(t){selectFile(this)}),t.dblclick(function(t){selectFile(this),setFile()}),t.tooltip({show:{delay:700},track:!0,content:tooltipContent}),t.bind("contextmenu",function(t){t.stopPropagation(),t.preventDefault(),closeMenus("dir"),selectFile(this),$(this).tooltip("close");var a=t.pageY-$("#menuFile").height();return a<0&&(a=0),$("#menuFile").css({top:a+"px",left:t.pageX+"px"}).show(),!1})},this.GetElement=function(){return $('li[data-path="'+this.fullPath+'"]')},this.IsImage=function(){var t=!1;return"image"==this.type&&(t=!0),t},this.Delete=function(){if(RoxyFilemanConf.DELETEFILE){var a=RoxyUtils.AddParam(RoxyFilemanConf.DELETEFILE,"f",this.fullPath),i=this;$.ajax({url:a,type:"POST",data:{f:this.fullPath},dataType:"json",async:!1,success:function(t){if("ok"==t.res.toLowerCase()){$('li[data-path="'+i.fullPath+'"]').remove();var a=Directory.Parse(i.path);a&&(a.files--,a.Update(),a.SetStatusBar())}else alert(t.msg)},error:function(i){alert(t("E_LoadingAjax")+" "+a)}})}else alert(t("E_ActionDisabled"))},this.Rename=function(a){if(!RoxyFilemanConf.RENAMEFILE)return alert(t("E_ActionDisabled")),!1;if(!a)return!1;var i=RoxyUtils.AddParam(RoxyFilemanConf.RENAMEFILE,"f",this.fullPath);i=RoxyUtils.AddParam(i,"n",a);var e=this,s=!1;return $.ajax({url:i,type:"POST",data:{f:this.fullPath,n:a},dataType:"json",async:!1,success:function(t){if("ok"==t.res.toLowerCase()){var i=RoxyUtils.MakePath(this.path,a);$('li[data-path="'+e.fullPath+'"] .icon').attr("src",RoxyUtils.GetFileIcon(a)),$('li[data-path="'+e.fullPath+'"] .name').text(a),$('li[data-path="'+i+'"]').attr("data-path",i),s=!0}t.msg&&alert(t.msg)},error:function(a){alert(t("E_LoadingAjax")+" "+i)}}),s},this.Copy=function(a){if(RoxyFilemanConf.COPYFILE){var i=RoxyUtils.AddParam(RoxyFilemanConf.COPYFILE,"f",this.fullPath);i=RoxyUtils.AddParam(i,"n",a);var e=!1;return $.ajax({url:i,type:"POST",data:{f:this.fullPath,n:a},dataType:"json",async:!1,success:function(t){if("ok"==t.res.toLowerCase()){var i=Directory.Parse(a);i&&(i.files++,i.Update(),i.SetStatusBar(),i.ListFiles(!0)),e=!0}t.msg&&alert(t.msg)},error:function(a){alert(t("E_LoadingAjax")+" "+i)}}),e}alert(t("E_ActionDisabled"))},this.Move=function(a){if(RoxyFilemanConf.MOVEFILE){newFullPath=RoxyUtils.MakePath(a,this.name);var i=RoxyUtils.AddParam(RoxyFilemanConf.MOVEFILE,"f",this.fullPath);i=RoxyUtils.AddParam(i,"n",newFullPath);var e=this,s=!1;return $.ajax({url:i,type:"POST",data:{f:this.fullPath,n:newFullPath},dataType:"json",async:!1,success:function(t){if("ok"==t.res.toLowerCase()){$('li[data-path="'+e.fullPath+'"]').remove();var i=Directory.Parse(e.path);i&&(i.files--,i.Update(),i.SetStatusBar(),(i=Directory.Parse(a)).files++,i.Update()),s=!0}t.msg&&alert(t.msg)},error:function(a){alert(t("E_LoadingAjax")+" "+i)}}),s}alert(t("E_ActionDisabled"))}}File.Parse=function(t){var a=!1,i=$("#pnlFileList").find('li[data-path="'+t+'"]');return i.length>0&&(a=new File(i.attr("data-path"),i.attr("data-size"),i.attr("data-time"),i.attr("data-w"),i.attr("data-h"))),a};